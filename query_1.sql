SELECT name, averages FROM (SELECT *, avg(value) as averages FROM marks m LEFT JOIN students s ON m.student_id = s.id GROUP BY student_id ORDER BY avg(value) DESC LIMIT 5)